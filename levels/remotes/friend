title = Amico
cards = pull push commit-auto checkout

[description]

Il tuo amico ha aggiunto un'altra riga al tuo tema! Prendila, aggiungine una terza e gliela rimandi!

Fate a turno finche' non avete cinque righe!

[setup yours]

echo "Riga 1" > tema
git add .
git commit -m "Una riga"

git push -u friend main

[setup friend]

git checkout main
echo "Riga 2, gnihihi" >> tema
git commit -am "Un'altra riga"

[actions friend]

if test "$(git log --oneline | wc -l)" -eq 3; then
    git reset --hard main # Necessario perche' la working directory non si aggiorna quando facciamo push al friend.
    echo "Riga 4, blurbblubb" >> tema
    git commit -am "Riga finale"
    hint "Oh bello, ho aggiunto una quarta riga!"
fi

[win]

# Hai ricevuto la seconda riga dal tuo amico
git show HEAD:tema | grep gnihihi

# Hai ricevuto la quarta riga dal tuo amico.
git show HEAD:tema | grep blurbblubb

[win friend]

# L'amico ha ricevuto la terza riga da te
test "$(git show HEAD:tema | wc -l)" -ge 3

# L'amico ha ricevuto la quinta riga da te
test "$(git show HEAD:tema | wc -l)" -ge 5
