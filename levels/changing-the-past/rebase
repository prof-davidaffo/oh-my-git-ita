title = Fare rebase
cards = checkout commit-auto reset-hard rebase

[description]

Ok, pare che risparmiare tempo la mattina usando universi paralleli sia contro il regolamento dell'Associazione Internazionale di Viaggio nel Tempo. Dovrai fare le tue attivita' in sequenza, dopotutto.

Vedi la carta "rebase"? Quando la trascini su un commit, copia gli eventi della tua linea temporale corrente dopo quello specificato! In questo modo puoi creare una linea temporale pulita e lineare in cui visiti tutti e tre i negozi.

Di nuovo, vogliamo farne la nostra realta' di base: il branch "main" deve puntare a quella linea temporale!

[setup]

echo "You do not have a baguette.

You do not have coffee.

You do not have a donut." > you

git add .
git commit -m "The Beginning"

git checkout -b baguette main
echo "You have a baguette.

You do not have coffee.

You do not have a donut." > you
git add .
git commit -m "You buy a baguette"

echo "You ate a baguette.

You do not have coffee.

You do not have a donut." > you
git add .
git commit -m "You eat the baguette"

git checkout -b coffee main
echo "You do not have a baguette.

You have coffee.

You do not have a donut." > you
git add .
git commit -m "You buy some coffee"

echo "You do not have a baguette.

You drank coffee.

You do not have a donut." > you
git add .
git commit -m "You drink the coffee"

git checkout -b donut main
echo "You do not have a baguette.

You do not have coffee.

You have a donut." > you
git add .
git commit -m "You buy a donut"

echo "You do not have a baguette.

You do not have coffee.

You ate a donut." > you
git add .
git commit -m "You eat the donut"

git checkout --detach main


[win]

# Riordina tutti e tre i branch in uno solo e sposta il riferimento del branch main
{ git show main:you | grep "You ate.*baguette"; } && { git show main:you | grep "You drank.*coffee"; } && { git show main:you | grep "You ate.*donut"; } && { test "$(git log main --oneline | wc -l)" -eq 7; }

[congrats]

Nota come le altre linee temporali e i commit siano ancora li': se qualcosa va storto, puoi tornare indietro anche a quelli.

E' davvero difficile *distruggere* qualcosa con la tua macchina del tempo.
