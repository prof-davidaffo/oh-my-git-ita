[description]

Un commit puo' avere piu' parent! Puoi specificare l'opzione -p piu' volte, cosi':

    git commit-tree <tree> -m "Descrizione" -p <parent1> -p <parent2>

Costruisci una forma a rombo con i commit, dove due commit puntano allo stesso parent e un quarto commit punta a entrambi.

[setup]

[setup goal]

TREE=$(git write-tree)
SOUTH=$(git commit-tree $TREE -m "Sud")
EAST=$(git commit-tree $TREE -m "Est" -p $SOUTH)
WEST=$(git commit-tree $TREE -m "Ovest" -p $SOUTH)
NORTH=$(git commit-tree $TREE -m "Nord" -p $EAST -p $WEST)

[win]

COMMITS=$(git cat-file --batch-check='%(objectname) %(objecttype)' --batch-all-objects | grep commit | cut -f1 -d" ")

for COMMIT in $COMMITS; do
    # My first parent's parents has to be the same as my second parent's parent.
    if [ "$(git rev-parse --verify -q $COMMIT^1^)" = "$(git rev-parse --verify -q $COMMIT^2^)" ]; then
        return 0
    fi
done

return 1
