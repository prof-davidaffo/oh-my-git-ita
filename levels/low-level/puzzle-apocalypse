[description]

Elimina tutti gli oggetti in questo repository usando solo comandi git!

Comandi utili:

    git prune
    git reflog expire

[setup]

echo ciao > ciao
BLOB=$(git hash-object -w ciao)
echo mondo > mondo
git add .
git commit -m "Initial commit"
echo bla bla >> mondo
git commit -a -m "Second commit"
git update-ref refs/important HEAD
git update-ref refs/interesting "$BLOB"

[setup goal]

echo ciao > ciao
BLOB=$(git hash-object -w ciao)
echo mondo > mondo
git add .
git commit -m "Initial commit"
echo bla bla >> mondo
git commit -a -m "Second commit"
git update-ref refs/important HEAD
git update-ref refs/interesting "$BLOB"

TREE=$(git mktree)
git read-tree $TREE
rm -rf .git/refs/*
rm -rf .git/objects/*

[win]

test "$(git cat-file --batch-check --batch-all-objects | wc -l)" -eq 0
