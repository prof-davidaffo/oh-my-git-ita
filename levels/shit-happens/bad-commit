title = Annullare un commit sbagliato
cards = reset commit-a

[description]

Oh no, abbiamo fatto un commit sbagliato! Come possiamo annullarlo e tornare a un punto in cui possiamo riprovare?

La risposta e' usare `git reset [commit]`, che fa due cose:

- Resetta il riferimento del branch corrente al commit che specifichi.
- E resetta l'index a quel commit.

Non modifica in alcun modo la working directory, il che significa che dopo puoi provare di nuovo a fare il commit che vuoi.

[setup]

echo "1 2 3 4" > numbers
git add .
git commit -m "Initial commit"
echo "1 2 3 4 5 6 7 8 9 11" > numbers
git commit -am "More numberrrrrs"

[win]

# In the last main commit, the numbers file contains the numbers from 1 to 10.
test "$(git show main:numbers)" = "1 2 3 4 5 6 7 8 9 10"
# The commit message of that commit is "More numbers".
git log -1 --oneline | grep "More numbers"
# The commit with the typo is not part of the main branch anymore.
git log --oneline | grep -v "rrrrr"
