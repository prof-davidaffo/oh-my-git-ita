title = Annullare un commit sbagliato
cards = reset commit-a

[description]

Oh no, abbiamo fatto un commit sbagliato! Come possiamo annullarlo e tornare a un punto in cui possiamo riprovare?

La risposta e' usare `git reset [commit]`, che fa due cose:

- Resetta il riferimento del branch corrente al commit che specifichi.
- E resetta l'index a quel commit.

Non modifica in alcun modo la working directory, il che significa che dopo puoi provare di nuovo a fare il commit che vuoi.

[setup]

echo "1 2 3 4" > numbers
git add .
git commit -m "Commit iniziale"
echo "1 2 3 4 5 6 7 8 9 11" > numbers
git commit -am "Altri numeeeee"

[win]

# Nell'ultimo commit di main, il file numbers contiene i numeri da 1 a 10.
test "$(git show main:numbers)" = "1 2 3 4 5 6 7 8 9 10"
# Il messaggio di quel commit e' "Altri numeri".
git log -1 --oneline | grep "Altri numeri"
# Il commit con il refuso non fa piu' parte del branch main.
git log --oneline | grep -v "eeeee"
